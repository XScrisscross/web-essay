<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        // 1.用于去重
        // 去除数组的重复成员
        [...new Set(array)]

        // [...new Set('ababbc')].join('')
        // "abc"

        // 2.Set加入的值认为NaN等于NaN
        let set = new Set();
        let a = NaN;
        let b = NaN;
        set.add(a);
        set.add(b);
        set // Set {NaN}

        // 3.Set结构具有的遍历方法
        // Set.prototype.keys()：返回键名的遍历器
        // Set.prototype.values()：返回键值的遍历器
        // Set.prototype.entries()：返回键值对的遍历器
        // Set.prototype.forEach()：使用回调函数遍历每个成员
        let set = new Set(['red', 'green', 'blue']);

        for (let item of set.keys()) {
            console.log(item);
        }
        // red
        // green
        // blue

        for (let item of set.values()) {
            console.log(item);
        }
        // red
        // green
        // blue

        for (let item of set.entries()) {
            console.log(item);
        }
        // ["red", "red"]
        // ["green", "green"]
        // ["blue", "blue"]

        let set = new Set([1, 4, 9]);
        set.forEach((value, key) => console.log(key + ' : ' + value))
        // 1 : 1
        // 4 : 4
        // 9 : 9

        let set = new Set(['red', 'green', 'blue']);
        let arr = [...set];
        // ['red', 'green', 'blue']

        // 4.并集交集差集的实现
        let a = new Set([1, 2, 3]);
        let b = new Set([4, 3, 2]);

        // 并集
        let union = new Set([...a, ...b]);
        // Set {1, 2, 3, 4}

        // 交集
        let intersect = new Set([...a].filter(x => b.has(x)));
        // set {2, 3}

        // 差集
        let difference = new Set([...a].filter(x => !b.has(x)));
        // Set {1}

        // 5.Map写入及遍历
        const map = new Map([
            ['F', 'no'],
            ['T', 'yes'],
        ]);

        for (let key of map.keys()) {
            console.log(key);
        }
        // "F"
        // "T"

        for (let value of map.values()) {
            console.log(value);
        }
        // "no"
        // "yes"

        for (let item of map.entries()) {
            console.log(item[0], item[1]);
        }
        // "F" "no"
        // "T" "yes"

        // 或者
        for (let [key, value] of map.entries()) {
            console.log(key, value);
        }
        // "F" "no"
        // "T" "yes"

        // 等同于使用map.entries()
        for (let [key, value] of map) {
            console.log(key, value);
        }
        // "F" "no"
        // "T" "yes"

        // 6.Map转数组结构
        const map = new Map([
            [1, 'one'],
            [2, 'two'],
            [3, 'three'],
        ]);

        [...map.keys()]
        // [1, 2, 3]

        [...map.values()]
        // ['one', 'two', 'three']

        [...map.entries()]
        // [[1,'one'], [2, 'two'], [3, 'three']]

        [...map]
        // [[1,'one'], [2, 'two'], [3, 'three']]

        // 7.数组转Map
        new Map([
            [true, 7],
            [{ foo: 3 }, ['abc']]
        ])
        // Map {
        //   true => 7,
        //   Object {foo: 3} => ['abc']

        // }

        // 8.Map转对象
        function strMapToObj(strMap) {
            let obj = Object.create(null);
            for (let [k, v] of strMap) {
                obj[k] = v;
            }
            return obj;
        }

        const myMap = new Map()
            .set('yes', true)
            .set('no', false);
        strMapToObj(myMap)
        // { yes: true, no: false }

        // 9.对象转Map
        function objToStrMap(obj) {
            let strMap = new Map();
            for (let k of Object.keys(obj)) {
                strMap.set(k, obj[k]);
            }
            return strMap;
        }

        objToStrMap({ yes: true, no: false })
        // Map {"yes" => true, "no" => false}

        // 10.JSON转Map
        function jsonToStrMap(jsonStr) {
            return objToStrMap(JSON.parse(jsonStr));
        }

        jsonToStrMap('{"yes": true, "no": false}')
        // Map {'yes' => true, 'no' => false}
    </script>
</body>

</html>
